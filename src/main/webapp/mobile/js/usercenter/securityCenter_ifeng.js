function flag_init_sc(){
	var storage=window.localStorage;
	var tpFlag=storage.getItem("transPassFlag");
	var vFlag=storage.getItem("verifiedFlag");
	var pFlag=storage.getItem("phoneFlag");
	if(tpFlag!=null){
		if(tpFlag=="Y"){
			$("#spTPFlag").text("已设置");
		}else{
			$("#spTPFlag").text("未设置")
		}
	if(vFlag=="Y"){
		$("#spVFlag").text("已认证");
		}else{$("#spVFlag").text("未认证")}if(pFlag=="Y"){$("#spPhoneFlag").text("修改")}else{$("#spPhoneFlag").text("未绑定")}}else{tigMessage_foundation("获取用户信息失败");return}}function modifyPassword_sc(oldpwd,newpwd,renewpwd){var op=$("#"+oldpwd).val();var np=$("#"+newpwd).val();var rnp=$("#"+renewpwd).val();if(op=="undefined"||op==undefined||op==null||op==""){tigMessage_foundation("请填写旧密码");return false}if(np=="undefined"||np==undefined||np==null||np==""){tigMessage_foundation("请填写新密码");return}if(np.length<6||np.length>15){tigMessage_foundation("请确保新密码长度6-15位");return}if(rnp=="undefined"||rnp==undefined||rnp==null||rnp==""){tigMessage_foundation("请确认新密码");return}if(np!=rnp){tigMessage_foundation("新密码不一致");return}var storage=window.localStorage;var cmd=1007;var bodyString="";var storeid=storage.getItem("storeId");if(storeid!=null){}var userid=storage.getItem("userid");var dataparm='rqmsg={"body":{"userId":"'+userid+'","storeId":"'+storeid+'",';dataparm+='"oldPass":"'+op+'","newPass":"'+np+'",';dataparm+=' "functionCode":"2"},';dataparm+='"head":{"cmd":'+cmd+',"id":"'+randomCmdNum_foundation()+'","token":"'+getToken_foundation()+'"}}';$.ajax({url:getApiUrl_foundation(),data:dataparm,dataType:"jsonp",jsonp:"callback",jsonpCallback:"success_jsonp",timeout:3000,dataFilter:function(json){return json},success:function(json,textStatus){if(json.head.retCode=="100000"){window.localStorage.clear();window.location.href="../../user/succeed_page/succeed_changepassword.html"}else{tigMessage_foundation(json.head.retDesc)}return},error:function(XMLHttpRequest,textStatus,errorThrown){tigMessage_foundation("操作用户过多，请稍后重试!")}})}function modifyPhone_init_sc(){var storage=window.localStorage;var phoneFlag=storage.getItem("phoneFlag");var phoneNo=storage.getItem("phoneNumber");if(phoneFlag!=null){if(phoneFlag=="Y"){$("#oldphone").show();phoneNo=phoneNo.substring(phoneNo.length-4,phoneNo.length);phoneNo="*******"+phoneNo;$("#divPhoneNo").html("当前已绑定的手机号码："+phoneNo+"")}else{$("#oldphone").hide();$("#divPhoneNo").html("当前未绑定手机号码")}}else{$("#divPhoneNo").html("获取用户信息失败")}}function modifyPhone_vfCode_sc(oldphone,newphone){var storage=window.localStorage;var phoneFlag=storage.getItem("phoneFlag");var op=$("#"+oldphone).val();var np=$("#"+newphone).val();var isMobile=/^(?:13\d|15\d|18\d)\d{5}(\d{3}|\*{3})$/;if(op=="undefined"||op==undefined||op==null||op==""){if(phoneFlag=="Y"){tigMessage_foundation("请填写旧手机号码");return}}else{if(!isMobile.test(op)){tigMessage_foundation("旧手机号格式不正确");return}}if(np=="undefined"||np==undefined||np==null||np==""){tigMessage_foundation("请填写新手机号");return}if(!isMobile.test(np)){tigMessage_foundation("新手机号格式不正确");return}var vfp=np;if(op=="undefined"||op==undefined||op==null||op==""){}else{vfp=op}var dataparm='rqmsg={"body":{"phone":"'+np+'"},"head":{"cmd":1001,"id":"'+randomCmdNum_foundation()+'","token":"'+getToken_foundation()+'"}}';$.ajax({url:getApiUrl_foundation(),data:dataparm,dataType:"jsonp",jsonp:"callback",jsonpCallback:"success_jsonp",timeout:3000,dataFilter:function(json){return json},success:function(json,textStatus){if(json.head.retCode=="100000"){var code=json.head.retDesc;if(code!=null&&code!=""){$("#vfcode").val(code)}}else{}},error:function(XMLHttpRequest,textStatus,errorThrown){tigMessage_foundation("操作用户过多，请稍后重试");return}})}function modifyPhone_sc(oldphone,newphone,vfcode){var storage=window.localStorage;var phoneFlag=storage.getItem("phoneFlag");var op=$("#"+oldphone).val();var np=$("#"+newphone).val();var vfc=$("#"+vfcode).val();var isMobile=/^(?:13\d|15\d|18\d)\d{5}(\d{3}|\*{3})$/;if(op=="undefined"||op==undefined||op==null||op==""){if(phoneFlag=="Y"){tigMessage_foundation("请填写旧手机号码");return}}else{if(!isMobile.test(op)){tigMessage_foundation("旧手机号格式不正确");return}}if(np=="undefined"||np==undefined||np==null||np==""){tigMessage_foundation("请填写新手机号");return}if(!isMobile.test(np)){tigMessage_foundation("新手机号格式不正确");return}if(vfc=="undefined"||vfc==undefined||vfc==null||vfc==""){tigMessage_foundation("请输入验证码");return}var userName=storage.getItem("Name");var cmd1=1005;var vfp=np;if(op=="undefined"||op==undefined||op==null||op==""){}else{vfp=op}var dataparm1='rqmsg={"body":{"phone":"'+np+'","vfCode":"'+vfc+'",';dataparm1+=' "userName":"'+userName+'"},';dataparm1+='"head":{"cmd":'+cmd1+',"id":"'+randomCmdNum_foundation()+'","token":"'+getToken_foundation()+'"}}';$.ajax({url:getApiUrl_foundation(),data:dataparm1,dataType:"jsonp",jsonp:"callback",jsonpCallback:"success_jsonp",timeout:3000,dataFilter:function(json){return json},success:function(json,textStatus){if(json.head.retCode=="100500"){var cmd=1007;var bodyString="";var storeid=storage.getItem("storeId");if(storeid!=null){}var userid=storage.getItem("userid");
var dataparm='rqmsg={"body":{"userId":"'+userid+'","storeId":"'+storeid+'",';var fc="";if(op=="undefined"||op==undefined||op==null||op==""){dataparm+='"newPhone":"'+np+'",';fc=3}else{dataparm+=' "oldPhone":"'+op+'","newPhone":"'+np+'",';fc=4}dataparm+='"vfCode":"'+vfc+'",';dataparm+=' "functionCode":"'+fc+'"},';dataparm+='"head":{"cmd":'+cmd+',"id":"'+randomCmdNum_foundation()+'","token":"'+getToken_foundation()+'"}}';$.ajax({url:getApiUrl_foundation(),data:dataparm,dataType:"jsonp",jsonp:"callback",jsonpCallback:"success_jsonp",timeout:3000,dataFilter:function(json){return json},success:function(json,textStatus){if(json.head.retCode=="100000"){storage.setItem("phoneFlag","Y");storage.setItem("phoneNumber",np);windowChangePage_foundation("../../user/succeed_page/succeed_changephone.html")}else{tigMessage_foundation(json.head.retDesc)}return},error:function(XMLHttpRequest,textStatus,errorThrown){tigMessage_foundation("操作用户过多，请稍后重试!")}})}else{tigMessage_foundation(json.head.retDesc)}return},error:function(XMLHttpRequest,textStatus,errorThrown){tigMessage_foundation("操作用户过多，请稍后重试!")}})}function setTransPass_init_sc(){var storage=window.localStorage;var tpFlag=storage.getItem("transPassFlag");if(tpFlag!=null){if(tpFlag=="Y"){$("#divTP").html("您已设置了交易密码")}else{$("#divTP").hide();$("#divTPContent").show()}}else{$("#divPhoneNo").html("获取用户信息失败")}}function setTransPass_sc(transpwd,retranspwd){var storage=window.localStorage;var tpFlag=storage.getItem("transPassFlag");if(tpFlag!=null){if(tpFlag=="Y"){tigMessage_foundation("您已设置过交易密码");return}}var tp=$("#"+transpwd).val();var rtp=$("#"+retranspwd).val();if(tp=="undefined"||tp==undefined||tp==null||tp==""){tigMessage_foundation("请填写交易密码");return}if(tp.length<6||tp.length>16){tigMessage_foundation("请确保新密码长度6-16位");return}if(rtp=="undefined"||rtp==undefined||rtp==null||rtp==""){tigMessage_foundation("请确认密码");return}if(tp!=rtp){tigMessage_foundation("两次密码设置不一致");return}var cmd=1007;var storeid=storage.getItem("storeId");var userid=storage.getItem("userid");var dataparm='rqmsg={"body":{"userId":"'+userid+'","storeId":"'+storeid+'",';dataparm+='"newDrawPass":"'+tp+'",';dataparm+=' "functionCode":"5"},';dataparm+='"head":{"cmd":'+cmd+',"id":"'+randomCmdNum_foundation()+'","token":"'+getToken_foundation()+'"}}';$.ajax({url:getApiUrl_foundation(),data:dataparm,dataType:"jsonp",jsonp:"callback",jsonpCallback:"success_jsonp",timeout:3000,dataFilter:function(json){return json},success:function(json,textStatus){if(json.head.retCode=="100000"){storage.setItem("transPassFlag","Y");windowChangePage_foundation("../../user/succeed_page/succeed_setpassword.html")}else{tigMessage_foundation(json.head.retDesc)}return},error:function(XMLHttpRequest,textStatus,errorThrown){tigMessage_foundation("操作用户过多，请稍后重试!")}})}

function forgetTransPass_vfCode_sc(phone){
	var p=$("#"+phone).val();
	var isMobile=/^(?:13\d|15\d|18\d)\d{5}(\d{3}|\*{3})$/;
	if(p=="undefined"||p==undefined||p==null||p==""){
		tigMessage_foundation("请填写手机号码");
		return
	}else{
		if(!isMobile.test(p)){
			tigMessage_foundation("手机号格式不正确");
			return
		}
	}
	$.ajax({
		url:getApiUrl_foundation(),
		data:{'phone':p},
		success:function(json,textStatus){
			if(json.head.retCode=="100000"){
				var code=json.head.retDesc;
				if(code!=null&&code!=""){
					$("#vfCode").val(code)
					}
				}else{
					tigMessage_foundation(json.head.retDesc)
				}return
			},
		error:function(XMLHttpRequest,textStatus,errorThrown){
			tigMessage_foundation("操作用户过多，请稍后重试");
			return
		}
	})
}

function forgetTransPass_next_sc(){var userName=$("#name").val();var phone=$("#phone").val();var vfCode=$("#vfCode").val();if(userName=="undefined"||userName==undefined||userName==null||userName==""){tigMessage_foundation("请填写用户名");return}var isMobile=/^(?:13\d|15\d|18\d)\d{5}(\d{3}|\*{3})$/;if(phone=="undefined"||phone==undefined||phone==null||phone==""){tigMessage_foundation("请填写手机号码");return}else{if(!isMobile.test(phone)){tigMessage_foundation("手机号格式不正确");return}}if(vfCode=="undefined"||vfCode==undefined||vfCode==null||vfCode==""){tigMessage_foundation("请获取验证码");return}var cmd1=1005;var dataparm1='rqmsg={"body":{"phone":"'+phone+'","vfCode":"'+vfCode+'",';dataparm1+='"userName":"'+userName+'"},';dataparm1+='"head":{"cmd":'+cmd1+',"id":"'+randomCmdNum_foundation()+'","token":"'+getToken_foundation()+'"}}';$.ajax({url:getApiUrl_foundation(),data:dataparm1,dataType:"jsonp",jsonp:"callback",jsonpCallback:"success_jsonp",timeout:3000,dataFilter:function(json){return json},success:function(json,textStatus){if(json.head.retCode=="100500"){var sign=json.body.sign;window.location="reset_password.html?s="+sign}else{tigMessage_foundation(json.head.retDesc)}return},error:function(XMLHttpRequest,textStatus,errorThrown){tigMessage_foundation("操作用户过多，请稍后重试!")}})}function forgetTransPass_reset_sc(){var sign=getQueryString_foundation("s");
if(sign==null||sign==undefined||sign=="undefined"||sign==""){tigMessage_foundation("获取参数失败");return}else{var np=$("#password").val();var rnp=$("#repassword").val();if(np=="undefined"||np==undefined||np==null||np==""){tigMessage_foundation("请填写新的交易密码");return}if(rnp=="undefined"||rnp==undefined||rnp==null||rnp==""){tigMessage_foundation("请再次确认新的交易密码");return}if(np.length<6||np.length>16){tigMessage_foundation("请确保新密码长度6-16位");return}if(np!=rnp){tigMessage_foundation("两次密码设置不一致");return}var storage=window.localStorage;var storeid=storage.getItem("storeId");var userid=storage.getItem("userid");var cmd=1007;var dataparm='rqmsg={"body":{"userId":"'+userid+'","storeId":"'+storeid+'",';dataparm+='"newPass":"'+np+'",';dataparm+='"sign":"'+sign+'", "functionCode":"9"},';dataparm+='"head":{"cmd":'+cmd+',"id":"'+randomCmdNum_foundation()+'","token":"'+getToken_foundation()+'"}}';$.ajax({url:getApiUrl_foundation(),data:dataparm,dataType:"jsonp",jsonp:"callback",jsonpCallback:"success_jsonp",timeout:3000,dataFilter:function(json){return json},success:function(json,textStatus){if(json.head.retCode=="100000"){storage.setItem("transPassFlag","Y");window.location="/user/drawing/drawing_money.html"}else{tigMessage_foundation(json.head.retDesc)}return},error:function(XMLHttpRequest,textStatus,errorThrown){tigMessage_foundation("操作用户过多，请稍后重试!")}})}}function authenticateRealName_jump_sc(){var storage=window.localStorage;var vFlag=storage.getItem("verifiedFlag");if(vFlag!=null){if(vFlag=="Y"){windowChangePage_foundation("authentication.html")}else{windowChangePage_foundation("n_authentication.html")}}else{tigMessage_foundation("获取用户信息失败");return}}function authenticateRealName_init_sc(){var storage=window.localStorage;var vFlag=storage.getItem("verifiedFlag");if(vFlag!=null){if(vFlag=="Y"){var realName=storage.getItem("realName");var idNum=storage.getItem("IDNumber");var rnShow="";for(var i=0;i<realName.length;i++){if(i==0){rnShow+=realName[0]}else{rnShow+="*"}}var inShow="";for(var i=0;i<idNum.length;i++){if(i==0){inShow+=idNum[0]}else{if(i==idNum.length-1){inShow+=idNum[i]}else{inShow+="*"}}}$("#divRealName").html("真实姓名："+rnShow);$("#divIDNum").html("身份证号："+inShow)}else{windowChangePage_foundation("n_authentication.html")}}else{tigMessage_foundation("获取用户信息失败");return}}function authenticateRealName_sc(realname,IDNum){var rn=$("#"+realname).val();var idNum=$("#"+IDNum).val();if(rn=="undefined"||rn==undefined||rn==null||rn==""){tigMessage_foundation("请填写真实姓名");return false}if(idNum=="undefined"||idNum==undefined||idNum==null||idNum==""){tigMessage_foundation("请填写身份证号");return}var storage=window.localStorage;var cmd=1007;var bodyString="";var storeid=storage.getItem("storeId");if(storeid!=null){}var userid=storage.getItem("userid");var dataparm='rqmsg={"body":{"userId":"'+userid+'","storeId":"'+storeid+'",';dataparm+='"IDNumber":"'+idNum+'","realName":"'+rn+'",';dataparm+=' "functionCode":"1"},';dataparm+='"head":{"cmd":'+cmd+',"id":"'+randomCmdNum_foundation()+'","token":"'+getToken_foundation()+'"}}';$.ajax({url:getApiUrl_foundation(),data:dataparm,dataType:"jsonp",jsonp:"callback",jsonpCallback:"success_jsonp",timeout:3000,dataFilter:function(json){return json},success:function(json,textStatus){if(json.head.retCode=="100000"){storage.setItem("verifiedFlag","Y");storage.setItem("realName",rn);storage.setItem("IDNumber",idNum);windowChangePage_foundation("authentication.html")}else{tigMessage_foundation(json.head.retDesc)}return},error:function(XMLHttpRequest,textStatus,errorThrown){tigMessage_foundation("操作用户过多，请稍后重试!")}})}function myInformation_init_sc(){var storage=window.localStorage;var realName=storage.getItem("realName");var idNum=storage.getItem("IDNumber");var pFlag=storage.getItem("phoneFlag");var bFlag=storage.getItem("bCardFlag");if(realName!=null){var rnShow="";for(var i=0;i<realName.length;i++){if(i==0){rnShow+=realName[0]}else{rnShow+="*"}}var inShow="";for(var i=0;i<idNum.length;i++){if(i==0){inShow+=idNum[0]}else{if(i==idNum.length-1){inShow+=idNum[i]}else{inShow+="*"}}}$("#divRealName").html("真实姓名："+rnShow);$("#divIDNum").html("身份证号："+inShow);if(pFlag=="Y"){var phone=storage.getItem("phoneNumber");phone=phone.substring(phone.length-4,phone.length);phone="*******"+phone;$("#divPhone").html("绑定手机："+phone)}else{$("#divPhone").html("绑定手机：未绑定")}if(bFlag=="Y"){var bankCard=storage.getItem("bankCard");var bc="";for(var i=0;i<bankCard.length;i++){if(i<bankCard.length-4){bc+="*"}else{bc+=bankCard[i]}}$("#divBankCard").html("银行卡号："+bc)}else{$("#divBankCard").html("银行卡号：未绑定")}}else{window.location.href="/user/login.html"}};